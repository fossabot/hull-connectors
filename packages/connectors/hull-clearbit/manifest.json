{
  "name": "Clearbit",
  "description": "Synchronize Data with Clearbit",
  "tags": [
    "incoming",
    "outgoing",
    "batch",
    "oneColumn",
    "smart-notifier"
  ],
  "ui": false,
  "picture": "picture.png",
  "admin": "admin.html",
  "tabs": [
    {
      "title": "Prospector",
      "url": "admin.html",
      "size": "large",
      "handler": "admin",
      "editable": false
    }
  ],
  "source": "clearbit",
  "readme": "readme.md",
  "version": "0.0.20-monorepo",
  "settings": [],
  "private_settings": [
    {
      "title": "Clearbit API Key",
      "name": "api_key",
      "description": "Use the secret API key from https://dashboard.clearbit.com/api",
      "type": "string",
      "format": "text"
    },
    {
      "title": "User Enrichment whitelist",
      "name": "enrich_user_segments",
      "description": "Specify one or more segments for which enrichment will be performed. *No one is sent if this is empty*",
      "type": "array",
      "options": {
        "standard": {
          "ALL": "All users"
        }
      },
      "default": [],
      "format": "segment"
    },
    {
      "title": "User Enrichment blacklist",
      "name": "enrich_user_segments_exclusion",
      "description": "Users in those segments will be excluded from enrichment. Takes precedence over the whitelist",
      "type": "array",
      "default": [],
      "format": "segment"
    },
    {
      "title": "Refresh Clearbit Data",
      "name": "enrich_refresh",
      "description": "Should the data be refreshed when users and accounts are updated? Use this in conjunction with Segment whitelist and blacklists to control how frequently to refresh data. If you enable `Refresh Clearbit Data`, users will be refreshed by clearbit everytime they are updated. We suggest to configure your segments to include `enriched_at > xx days ago` to mark users for refresh. If you leave it disabled, users and accounts will only be enriched once",
      "type": "boolean",
      "default": false
    },
    {
      "title": "Account Enrichment whitelist",
      "name": "enrich_account_segments",
      "description": "Specify one or more Account segments for which enrichment will be performed. *No one is sent if this is empty*",
      "type": "array",
      "options": {
        "standard": {
          "ALL": "All Accounts"
        }
      },
      "format": "accountSegment"
    },
    {
      "title": "Account Enrichment blacklist",
      "name": "enrich_account_segments_exclusion",
      "description": "Accounts in those segments will be excluded from enrichment. Takes precedence over the whitelist",
      "type": "array",
      "default": [],
      "format": "accountSegment"
    },
    {
      "title": "User Reveal whitelist",
      "description": "Who will be sent to Reveal. *Every anonymous user is sent if this is empty*. We never send anyone who has identifiable information",
      "name": "reveal_user_segments",
      "type": "array",
      "default": [],
      "options": {
        "standard": {
          "ALL": "All users"
        }
      },
      "format": "segment"
    },
    {
      "title": "User Reveal blacklist",
      "description": "Users in those segments will be excluded from reveal. Takes precedence over the whitelist",
      "name": "reveal_user_segments_exclusion",
      "type": "array",
      "default": [],
      "format": "segment"
    },
    {
      "title": "Attribute that defines the company domain",
      "name": "discover_domain",
      "type": "string",
      "format": "accountTrait",
      "default": "domain",
      "description": "Use this attribute as domain when fetching people from Clearbit."
    },
    {
      "name": "discover_segments",
      "title": "Discover filter",
      "description": "Define which companies are going to trigger new Discovery calls to find similar companies.",
      "type": "array",
      "default": [],
      "format": "accountSegment"
    },
    {
      "name": "discover_limit_count",
      "title": "Maximum number of companies to fetch for each new company triggerering Discovery",
      "type": "number",
      "format": "range",
      "default": 5,
      "minimum": 1,
      "maximum": 10,
      "multipleOf": 1
    },
    {
      "name": "prospect_domain",
      "title": "Domain lookup",
      "type": "string",
      "format": "accountTrait",
      "default": "domain",
      "description": "Which attribute to use as the domain to prospect. Usually the Account domain."
    },
    {
      "name": "prospect_account_segments",
      "title": "Account Prospector whitelist",
      "description": "The Clearbit Prospector API will be called for these accounts find leads for their parent Account",
      "type": "array",
      "default": [],
      "options": {
        "standard": {
          "ALL": "All Accounts"
        }
      },
      "format": "segment"
    },
    {
      "name": "prospect_account_segments_exclusion",
      "title": "Account Prospector blacklist",
      "description": "Accounts in those segments will be excluded from Prospector. Takes precedence over the whitelist",
      "type": "array",
      "default": [],
      "format": "segment"
    },
    {
      "name": "prospect_limit_count",
      "title": "Maximum number of leads to fetch per company",
      "type": "number",
      "format": "range",
      "default": 5,
      "minimum": 1,
      "maximum": 20,
      "multipleOf": 1
    },
    {
      "name": "prospect_filter_role",
      "title": "Filter for a certain Role",
      "type": "array",
      "format": "select",
      "enum": [
        "",
        "ceo",
        "communications",
        "consulting",
        "customer_service",
        "education",
        "engineering",
        "finance",
        "founder",
        "health_professional",
        "human_resources",
        "information_technology",
        "legal",
        "marketing",
        "operations",
        "owner",
        "president",
        "product",
        "public_relations",
        "real_estate",
        "recruiting",
        "research",
        "sales"
      ],
      "description": "Specify a certain role or leave blank to search without restriction."
    },
    {
      "name": "prospect_filter_seniority",
      "title": "Filter for specific Seniority",
      "type": "array",
      "format": "select",
      "enum": [
        "",
        "executive",
        "director",
        "manager"
      ],
      "description": "Define a specific seniority or leave blank if you don't want to restrict your search."
    },
    {
      "name": "prospect_filter_titles",
      "title": "Search for Titles containing",
      "type": "array",
      "items": {
        "title": "Title",
        "type": "string"
      },
      "format": "select",
      "options": {
        "allowCreate": true
      },
      "description": "Restrict your search by specifying criteria for the prospect's title. If left blank, search is carried out without restriction."
    }
  ],
  "settings_sections": [
    {
      "title": "Setup",
      "step": "credentials",
      "description": "Clearbit API Key",
      "properties": [
        "private_settings.api_key"
      ]
    },
    {
      "title": "Enrich",
      "description": "Configure the way Clearbit Enrich runs",
      "properties": [
        "private_settings.enrich_user_segments",
        "private_settings.enrich_user_segments_exclusion",
        "private_settings.enrich_account_segments",
        "private_settings.enrich_account_segments_exclusion",
        "private_settings.enrich_refresh"
      ]
    },
    {
      "title": "Reveal",
      "description": "Configure the way Clearbit Reveal runs",
      "properties": [
        "private_settings.reveal_user_segments",
        "private_settings.reveal_user_segments_exclusion"
      ]
    },
    {
      "title": "Prospector",
      "description": "Configure the way Clearbit Prospector runs",
      "properties": [
        "private_settings.prospect_account_segments",
        "private_settings.prospect_account_segments_exclusion",
        "private_settings.prospect_domain",
        "private_settings.prospect_filter_titles",
        "private_settings.prospect_filter_role",
        "private_settings.prospect_filter_seniority",
        "private_settings.prospect_limit_count"
      ]
    }
  ],
  "subscriptions": [
    {
      "url": "/smart-notifier",
      "conditions": {
        "channels": {
          "only": [
            "user:update",
            "account:update"
          ]
        }
      },
      "channels": [
        {
          "channel": "user:update",
          "handler": "updateUser"
        },
        {
          "channel": "account:update",
          "handler": "updateAccount"
        }
      ]
    }
  ],
  "incoming": [
    {
      "url": "/clearbit-enrich",
      "handler": "webhookHandler"
    }
  ],
  "json": [
    {
      "url": "/prospect",
      "handler": "prospectHandler"
    }
  ],
  "status": {
    "url": "/status",
    "initial_value": "setupRequired",
    "type": "interval",
    "handler": "statusHandler",
    "value": "5"
  },
  "statuses": [
    {
      "url": "/status",
      "type": "interval",
      "handler": "statusHandler",
      "value": "5"
    }
  ]
}

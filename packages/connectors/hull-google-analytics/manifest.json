{
  "name": "Google Analytics",
  "description": "Sends Events to Google Analytics",
  "source": "ga",
  "logo": "logo.png",
  "picture": "picture.png",
  "version": "0.0.9-monorepo",
  "index": "ship.js",
  "tags": [
    "batch",
    "kraken-exports",
    "smart-notifier"
  ],
  "settings": [
    {
      "name": "tid",
      "title": "Google Tracking ID",
      "description": "Enter the Google tracking ID (UA-XXXXXXX-Y)",
      "type": "string",
      "format": "string",
      "options": {
        "placeholder": "UA-XXXXXXX-Y"
      }
    }
  ],
  "private_settings": [
    {
      "name": "synchronized_user_segments",
      "title": "Segment Filter",
      "description": "Select users to send to Google Analytics",
      "type": "array",
      "default": [
        "ALL"
      ],
      "format": "segment",
      "options": {
        "standard": {
          "ALL": "All Users"
        }
      }
    },
    {
      "name": "uid",
      "title": "UID Mapping",
      "description": "Identifier to send as google's `uid`",
      "type": "string",
      "default": "",
      "enum": [
        "external_id",
        "id"
      ]
    },
    {
      "name": "events",
      "title": "Events to send to GA",
      "type": "array",
      "format": "table",
      "options": {
        "itemsPerRow": 1
      },
      "items": {
        "type": "object",
        "properties": {
          "event": {
            "title": "Event",
            "type": "string",
            "description": "Hull Event to send to Google Analytics",
            "format": "event"
          },
          "action": {
            "title": "Action",
            "description": "Hard-coded value that will be sent for the Action property in Google Analytics",
            "type": "string",
            "format": "string"
          },
          "category": {
            "title": "Category",
            "description": "The name of the event property to use for the category. We will send the value of this property as `value`",
            "type": "string",
            "format": "string"
          }
        }
      },
      "default": []
    }
  ],
  "settings_sections": [
    {
      "title": "Setup",
      "description": "Specify the Google Tracking ID here. Once you have configured the Google Analytics connector, you will need to inject the bridge snippet by going to the Platform settings for your web property in Hull, and installing the Google analytics connector so we can establish a bridge between Hull identities and the Google Analytics user ID named `cid`. If Hull.js can't find a Google Analytics snippet in the page, it will inject it and configure it for you, otherwise it will rely on the existing GA snippet, and this ID will be only used for server-side tracking",
      "properties": [
        "settings.tid",
        "settings.uid"
      ]
    },
    {
      "title": "Events to send",
      "description": "Here you can select additional server-side events to send to Google Analytics using their server-side API. Event name will be sent as 'label'. Events that are tracked in your page don't need to be listed here, they will be sent automatically. You only need to list events that are not generated in the page, such as backend events or events from SaaS services",
      "properties": [
        "private_settings.synchronized_user_segments",
        "private_settings.events"
      ]
    }
  ],
  "deployment_settings": [],
  "readme": "readme.md",
  "ui": false,
  "json": [],
  "incoming": [],
  "schedules": [],
  "statuses": [],
  "router": [],
  "subscriptions": [
    {
      "url": "/smart-notifier",
      "conditions": {
        "channels": {
          "only": [
            "user:update"
          ]
        },
        "segments": {
          "user:update": "private_settings.synchronized_user_segments"
        }
      },
      "channels": [
        {
          "channel": "user:update",
          "handler": "userUpdate"
        }
      ]
    }
  ]
}

{
  "name": "Pipedrive",
  "description": "Two-way Pipedrive integration for Prospects & Accounts",
  "source": "pipedrive",
  "logo": "logo.png",
  "picture": "picture.png",
  "version": "0.1.3-monorepo",
  "tags": [
    "incoming"
  ],
  "private_settings": [
    {
      "name": "oauth",
      "title": "Oauth",
      "type": "string",
      "format": "oauth",
      "description": "On the authentication screen, log into Pipedrive with your username and password, if you are not already logged in",
      "handler": "oauth",
      "url": "/auth",
      "options": {
        "tokenInUrl": false,
        "name": "Pipedrive",
        "strategy": {
          "authorizationURL": "https://oauth.pipedrive.com/oauth/authorize",
          "tokenURL": "https://oauth.pipedrive.com/oauth/token",
          "grant_type": "authorization_code"
        }
      }
    },
    {
      "name": "access_token",
      "title": "OAuth Access Token",
      "type": "string",
      "format": "hidden"
    },
    {
      "name": "refresh_token",
      "title": "OAuth Refresh Token",
      "type": "string",
      "format": "hidden"
    },
    {
      "name": "expires_in",
      "title": "OAuth Token Expiration in seconds",
      "type": "string",
      "format": "hidden"
    },
    {
      "name": "user_claims",
      "title": "Fields to match for User Identity Resolution",
      "type": "array",
      "format": "table",
      "items": {
        "type": "object",
        "properties": {
          "service": {
            "title": "Person Field ID",
            "type": "string",
            "format": "select",
            "options": {
              "allowCreate": false,
              "loadOptions": "/fields-pipedrive-person-in"
            }
          },
          "hull": {
            "title": "Hull User Ident",
            "enum": [
              "external_id",
              "email"
            ]
          }
        }
      },
      "default": [
        {
          "hull": "email",
          "service": "emails"
        }
      ]
    },
    {
      "name": "link_users_in_hull",
      "title": "Link Users to Accounts in Hull",
      "description": "Do you want to let Pipedrive update links between Users and Accounts in Hull? Be careful about conflicts with other connectors that would link users too.\n\n**IMPORTANT:** when this checkbox is checked the connector will create a Hull Account for EVERY Pipedrive Organization any Person is linked to (refer to documentation for more details).",
      "type": "boolean",
      "default": false
    },
    {
      "name": "incoming_user_attributes",
      "title": "User Attributes to capture from Pipedrive",
      "type": "array",
      "format": "traitMapping",
      "options": {
        "direction": "incoming",
        "showOverwriteToggle": false,
        "placeholder": "Pipedrive Person Field",
        "allowCreate": true,
        "loadOptions": "/fields-pipedrive-person-in",
        "source": "pipedrive"
      }
    }
  ],
  "settings": [],
  "resources": [],
  "readme": "readme.md",
  "tabs": [],
  "admin": "/admin",
  "ui": false,
  "statuses": [
    {
      "url": "/status",
      "type": "interval",
      "value": "5",
      "handler": "status"
    }
  ],
  "status": {
    "initial_value": "setupRequired",
    "url": "/status",
    "type": "interval",
    "value": "60",
    "handler": "status"
  },
  "json": [
    {
      "url": "/fetch",
      "handler": "fetchAll",
      "type": "string",
      "format": "action",
      "name": "fetch_all_persons",
      "title": "Fetch All Persons",
      "options": {
        "fireAndForget": true
      }
    },
    {
      "url": "/fields-pipedrive-person-in",
      "handler": "fieldsPipedrivePersonInbound"
    }
  ],
  "settings_sections": [
    {
      "title": "Connect with Pipedrive",
      "description": "Please begin by authenticating this connector with Pipedrive. You must have appropriate privileges to grant access. Hull accesses to only the endpoint required to do User and Account synchronization",
      "step": "credentials",
      "properties": [
        "private_settings.oauth"
      ]
    },
    {
      "title": "User - Identity",
      "description": "<b>Identity</b> is one of the most important concepts in Hull.  The field mapping for user identity should correspond to unique fields across systems.  This identity applies to both the data we send to Outreach as well as the data we pull from Outreach.  To read more about identity resolution please click [here](https://help.hull.io/hc/en-us/articles/360030051471 \"Identity Resolution Explained\") <br /><br /><b>Email</b> is typically a fairly stable identifier, but can be vulnerable to edge cases.  Ideally there is an unique identifier (external_id) that can be used across systems.  Try to configure the identity before doing anything else.  Changes to the identity after the data flow is already setup could result in irreconcilable scenarios. <br /><br /> <b>Please be aware that Pipedrive rejects user emails with the domain of the customer as well as pipedrivemail.com domains.</b>",
      "properties": [
        "private_settings.user_claims"
      ]
    },
    {
      "title": "User - Fetching from Pipedrive",
      "description": "Hull gives its customers the ability to capture a subset of user fields in order to have fine grain control over the dataflow.  Please configure the fields that you would like pulled from Pipedrive below.  <br /> <br /> Add a mapping by clicking \"Map an attribute\".  To create a new attribute in Hull, you may type in the attribute name in the \"Hull Attribute\" box on the right and hit enter to create a new attribute.<br /><br />",
      "properties": [
        "private_settings.incoming_user_attributes",
        "private_settings.link_users_in_hull",
        "json.fetch_all_persons"
      ]
    }
  ]
}

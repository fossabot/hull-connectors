{
  "name": "Outgoing Webhooks",
  "description": "Send Hull Users updates as Webhooks",
  "tags": [
    "batch",
    "batch-accounts",
    "smart-notifier",
    "kraken-exports"
  ],
  "picture": "picture.png",
  "version": "0.1.12-monorepo",
  "tabs": [
    {
      "title": "Code Editor",
      "url": "/admin.html",
      "size": "large",
      "setup": false,
      "workspace": true,
      "editable": true,
      "handler": "admin"
    }
  ],
  "private_settings": [
    {
      "name": "throttle_rate",
      "title": "Requests rate limit",
      "description": "Number of requests done every Interval (as defined below)",
      "default": 10,
      "type": "number"
    },
    {
      "name": "throttle_per_rate",
      "title": "Interval for request throughput",
      "description": "Set the number of milliseconds to define interval where above rate limit will be applied",
      "default": 1000,
      "type": "number"
    },
    {
      "name": "concurrency",
      "title": "Requests concurrency",
      "description": "Number of maximum concurrent, in-flight requests done by connector",
      "default": 10,
      "type": "number"
    },
    {
      "name": "code",
      "title": "Code",
      "description": "Enter JSON mapping code here",
      "type": "string",
      "default": "{}",
      "format": "hidden"
    },
    {
      "name": "headers",
      "title": "Header Array",
      "type": "array",
      "format": "table",
      "default": [
        {
          "key": "Accept",
          "value": "application/json"
        }
      ],
      "items": {
        "type": "object",
        "required": [
          "key",
          "value"
        ],
        "properties": {
          "key": {
            "title": "Header Key",
            "type": "string",
            "format": "string"
          },
          "value": {
            "title": "Header Value",
            "type": "string",
            "format": "string"
          }
        }
      }
    },
    {
      "name": "trigger",
      "title": "Trigger",
      "description": "Event that triggers a notification",
      "type": "array",
      "format": "event",
      "default": [],
      "options": {
        "standard": {
          "ENTERED_SEGMENT": "Entered Segment",
          "LEFT_SEGMENT": "Left Segment",
          "ATTRIBUTE_CHANGE": "Attribute value changed",
          "CREATED": "User Created"
        }
      }
    },
    {
      "name": "synchronized_segments",
      "title": "Applicable User Segments",
      "description": "User segments in which user events must occur in or on",
      "type": "array",
      "default": ["ALL"],
      "format": "segment",
      "options": {
        "standard": {
          "ALL": "All Users"
        }
      }
    },
    {
      "name": "synchronized_attributes",
      "title": "Attributes",
      "description": "Attributes to send",
      "type": "array",
      "format": "trait",
      "default": []
    },
    {
      "name": "url",
      "title": "Webhook URL",
      "description": "URL to send the Webhook to",
      "default": "",
      "type": "string",
      "format": "string"
    }
  ],
  "settings_sections": [
    {
      "title": "Requests",
      "description": "",
      "properties": [
        "private_settings.throttle_rate",
        "private_settings.throttle_per_rate",
        "private_settings.concurrency",
        "private_settings.headers",
        "private_settings.url"
      ]
    },
    {
      "title": "Users",
      "description": "",
      "properties": [
        "private_settings.trigger",
        "private_settings.synchronized_segments",
        "private_settings.synchronized_attributes",
        "private_settings.webhooks_url",
        "private_settings.webhooks_events",
        "private_settings.webhooks_attributes"
      ]
    }
  ],
  "json": [
    {
      "url": "/config",
      "handler": "configHandler",
      "options": {
        "cacheContextFetch": false
      }
    },
    {
      "url": "/entry",
      "handler": "entityHandler",
      "options": {
        "cacheContextFetch": false,
        "respondWithError": true
      }
    },
    {
      "url": "/preview",
      "handler": "previewHandler",
      "options": {
        "cacheContextFetch": false
      }
    }
  ],
  "deployment_settings": [],
  "readme": "readme.md",
  "ui": false,
  "resources": [],
  "subscriptions": [
    {
      "url": "/smart-notifier",
      "channels": [
        {
          "channel": "user:update",
          "handler": "userUpdate"
        }
      ],
      "conditions": {
        "segments": {
          "user:update": [
            "private_settings.synchronized_segments"
          ]
        },
        "channels": {
          "only": [
            "user:update",
            "ship:update"
          ]
        }
      }
    }
  ],
  "status": {
    "url": "/status",
    "type": "interval",
    "value": "60"
  }
}

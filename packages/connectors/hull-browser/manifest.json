{
  "name": "Browser Personalization",
  "description": "Get access to whitelisted attributes and segments from the Browser in realtime",
  "picture": "picture.png",
  "index": "ship.js",
  "version": "0.1.11-monorepo",
  "tags": [
    "smart-notifier",
    "incoming",
    "outgoing",
    "oneColumn"
  ],
  "settings": [
    {
      "name": "script",
      "title": "Code to be run everytime user is updated",
      "type": "string",
      "format": "code",
      "default": "console.log('Received Data from Browser connector', user, segments, account, account_segments, events, changes);"
    },
    {
      "title": "Send to Google Analytics",
      "description": "Send the attributes and events to Google Analytics in the page",
      "name": "use_ga",
      "format": "checkbox",
      "type": "boolean"
    },
    {
      "title": "Send to Google Tag Manager",
      "description": "Send the attributes and events to Google Tag Manager in the page",
      "name": "use_gtm",
      "format": "checkbox",
      "type": "boolean"
    }
  ],
  "private_settings": [
    {
      "name": "whitelisted_domains",
      "title": "Authorized Websites. (Domain only, without https://)",
      "description": "The connector will only load for the websites you list here",
      "type": "array",
      "format": "table",
      "items": {
        "type": "string"
      },
      "default": [
        "hull.io"
      ]
    },
    {
      "name": "synchronized_segments",
      "title": "Segment Filter",
      "description": "Only users from these segments will be sent",
      "type": "array",
      "default": [],
      "options": {
        "standard": {
          "ALL": "All users"
        }
      },
      "format": "segment"
    },
    {
      "name": "public_traits",
      "title": "Attributes that will be sent",
      "type": "array",
      "description": "Only these attributes will be sent.",
      "format": "trait",
      "default": [
        "domain",
        "email"
      ]
    },
    {
      "name": "public_segments",
      "title": "User Segments that will be sent",
      "description": "Only these segment names will be sent.",
      "type": "array",
      "format": "segment",
      "default": []
    },
    {
      "name": "public_account_segments",
      "title": "Account Segments that will be sent",
      "type": "array",
      "format": "accountSegment",
      "description": "Only these segment names will be sent.",
      "default": []
    }
  ],
  "json": [
    {
      "name": "credentials",
      "url": "/credentials",
      "handler": "credentialsHandler",
      "description": "Copy this snippet and add it to the Hull.js Website Connector",
      "format": "credentials",
      "type": "string"
    }
  ],
  "resources": [],
  "readme": "readme.md",
  "ui": false,
  "settings_sections": [
    {
      "title": "Setup",
      "description": "Copy this URL and add it to the list of your Hull.js Website Connector snippets",
      "step": "credentials",
      "properties": [
        "json.credentials"
      ]
    },
    {
      "title": "Filters",
      "description": "This section defines the required conditions for a user to be sent client-side",
      "properties": [
        "private_settings.whitelisted_domains",
        "private_settings.synchronized_segments"
      ]
    },
    {
      "title": "Exposed Data",
      "description": "This section defines the data that will be visible client-side. This way you can avoid exposing sensitive values",
      "properties": [
        "private_settings.public_traits",
        "private_settings.public_segments",
        "private_settings.public_account_segments"
      ]
    },
    {
      "title": "Code",
      "description": "The code you write below will run in the page whenever new data is sent client-side. we suggest you read the documentation to see the available data and the connector's behaviour",
      "properties": [
        "settings.script"
      ]
    }
  ],
  "subscriptions": [
    {
      "url": "/smart-notifier",
      "conditions": {
        "channels": {
          "only": [
            "user:update",
            "ship:update",
            "users_segment:update"
          ]
        },
        "segments": {
          "user:update": [
            "private_settings.synchronized_segments"
          ]
        }
      },
      "channels": [
        {
          "channel": "ship:update",
          "handler": "connectorUpdate"
        },
        {
          "channel": "users_segment:update",
          "handler": "connectorUpdate"
        },
        {
          "channel": "user:update",
          "handler": "userUpdate"
        }
      ]
    }
  ]
}

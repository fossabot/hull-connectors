{
  "name": "Browser Personalization",
  "description": "Get access to whitelisted attributes and segments from the Browser in realtime",
  "picture": "picture.png",
  "index": "ship.js",
  "version": "0.1.11-monorepo",
  "tags": [
    "smart-notifier",
    "incoming",
    "outgoing",
    "oneColumn"
  ],
  "settings": [
    {
      "name": "script",
      "title": "Code to be run everytime user is updated",
      "type": "string",
      "format": "code",
      "default": "console.log('Received Data from Browser connector', user, segments, account, account_segments, events, changes);"
    },
    {
      "title": "Send to Google Analytics",
      "description": "Send the attributes and events to Google Analytics in the page",
      "name": "use_ga",
      "format": "checkbox",
      "type": "boolean"
    },
    {
      "title": "Send to Google Tag Manager",
      "description": "Send the attributes and events to Google Tag Manager in the page",
      "name": "use_gtm",
      "format": "checkbox",
      "type": "boolean"
    },
    {
      "name": "load_scripts",
      "title": "External scripts",
      "description": "List of additional external JS files which will be loaded and run by Hull tracking tag on each page load. Paste full url.",
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    {
      "name": "init_script",
      "title": "Custom script",
      "description": "Write custom javascript code which will be run by Hull tracking tag on each page load. No `script` tag is needed here.",
      "type": "string",
      "format": "code"
    }
  ],
  "private_settings": [
    {
      "name": "whitelisted_domains",
      "title": "Whitelisted Domains",
      "description": "The connector will only load for the webpages served under domains here. We treat them as wildcards so all subdomains will be whitelisted too.",
      "type": "array",
      "format": "table",
      "items": {
        "type": "string"
      },
      "default": [
        "hull.io"
      ]
    },
    {
      "name": "synchronized_segments",
      "title": "Segment Filter",
      "description": "Only users from these segments will be sent",
      "type": "array",
      "default": [],
      "options": {
        "standard": {
          "ALL": "All users"
        }
      },
      "format": "segment"
    },
    {
      "name": "public_traits",
      "title": "Attributes that will be sent",
      "type": "array",
      "description": "Only these attributes will be sent.",
      "format": "trait",
      "default": [
        "domain",
        "email"
      ]
    },
    {
      "name": "public_segments",
      "title": "User Segments that will be sent",
      "description": "Only these segment names will be sent.",
      "type": "array",
      "format": "segment",
      "default": []
    },
    {
      "name": "public_account_segments",
      "title": "Account Segments that will be sent",
      "type": "array",
      "format": "accountSegment",
      "description": "Only these segment names will be sent.",
      "default": []
    },
    {
      "name": "track_page_inits",
      "title": "Track page views events automatically",
      "type": "boolean",
      "default": true
    },
    {
      "name": "script_enabled",
      "title": "Load additional scripts",
      "description": "When enabled all external scripts and custom script below will be loaded and run.",
      "type": "boolean",
      "default": false
    },
    {
      "name": "subscribe_to_user_updates",
      "title": "Enable Personalization",
      "description": "",
      "type": "boolean",
      "default": false
    }
  ],
  "json": [
    {
      "name": "credentials",
      "url": "/credentials",
      "handler": "credentialsHandler",
      "description": "Copy and paste the script tag in the `head` section in your website.",
      "format": "credentials",
      "type": "string"
    }
  ],
  "resources": [],
  "readme": "readme.md",
  "ui": false,
  "settings_sections": [
    {
      "title": "Installation",
      "description": "To install Hull tracking library in your website start by whitelisting all domains it will be loaded on.<br />Then copy and paste the tracking tag in the `head` section of the HTML on each page you would like to track.",
      "step": "credentials",
      "properties": [
        "private_settings.whitelisted_domains",
        "json.credentials"
      ]
    },
    {
      "title": "Tracking",
      "description": "Configure the tracking library. By default it tracks all page view events, you can turn it off below.",
      "properties": [
        "private_settings.track_page_inits"
      ]
    },
    {
      "title": "Additional scripts",
      "description": "This sections allows to quickly load additional scripts in your webpage wherever Hull tracking tag is present.<br />Although any javascript file can be loaded, this section is especially handy when deploying client parts of other connectors from Hull organization. Refer specific connector documentation to find link to paste here.",
      "properties": [
        "private_settings.script_enabled",
        "settings.load_scripts",
        "settings.init_script"
      ]
    },
    {
      "title": "Personalization",
      "description": "This section allows to personalize content on of the website based on data send back from Hull as we dected changes on identified user.<br /> - start by enabling the feature toggle<br /> - define conditions for a user to be sent client-side, by whitelisting some segments<br /> - select which data will be visible client-side. That way you can avoid exposing sensitive values. <br /> - finally write the code which will run in the page whenever new data is sent client-side. We suggest checking the documentation to see the available data and the connector's behaviour",
      "properties": [
        "private_settings.subscribe_to_user_updates",
        "private_settings.synchronized_segments",
        "private_settings.public_traits",
        "private_settings.public_segments",
        "private_settings.public_account_segments",
        "settings.script"
      ]
    }
  ],
  "subscriptions": [
    {
      "url": "/smart-notifier",
      "conditions": {
        "channels": {
          "only": [
            "user:update",
            "ship:update",
            "users_segment:update"
          ]
        },
        "segments": {
          "user:update": [
            "private_settings.synchronized_segments"
          ]
        }
      },
      "channels": [
        {
          "channel": "ship:update",
          "handler": "connectorUpdate"
        },
        {
          "channel": "users_segment:update",
          "handler": "connectorUpdate"
        },
        {
          "channel": "user:update",
          "handler": "userUpdate"
        }
      ]
    }
  ]
}
